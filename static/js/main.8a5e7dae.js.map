{"version":3,"file":"static/js/main.8a5e7dae.js","mappings":"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","sources":["components/NavBar.tsx","shared/constant.ts","components/SideMenu.tsx","components/Filters.tsx","shared/request.ts","shared/utils.ts","components/ContentBundleSize.tsx","components/ContentCompileSpeed.tsx","components/Content.tsx","App.tsx"],"sourcesContent":["import styled from '@modern-js/runtime/styled';\nimport { IconGithub } from '@arco-design/web-react/icon';\n\nconst Root = styled.div`\n  position: fixed;\n  display: flex;\n  z-index: 1;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 56px;\n  padding: 4px 24px;\n  background-color: #fff;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid #e8e8e8;\n`;\n\nconst Left = styled.div`\n  display: flex;\n  font-size: 18px;\n  align-items: center;\n  color: #111;\n`;\n\nconst Image = styled.img`\n  height: 100%;\n`;\n\nconst ImageWrapper = styled.div`\n  width: 48px;\n  height: 36px;\n  overflow: hidden;\n  margin-right: 16px;\n`;\n\nconst Link = styled.a`\n  display: flex;\n  align-items: center;\n  font-size: 28px;\n  color: #222;\n`;\n\nconst GitHubIcon = () => (\n  <Link\n    target=\"_blank\"\n    href=\"https://github.com/modern-js-dev/modern-js-benchmark\"\n  >\n    <IconGithub />\n  </Link>\n);\n\nexport const NavBar = () => {\n  return (\n    <Root className=\"nav-bar\">\n      <Left>\n        <ImageWrapper>\n          <Image src=\"https://lf-cdn-tos.bytescm.com/obj/static/webinfra/modern-js-website/assets/images/images/modernjs-logo.svg\" />\n        </ImageWrapper>\n        Modern.js Benchmark\n      </Left>\n      <GitHubIcon />\n    </Root>\n  );\n};\n","export const MENU = {\n  BUNDLE_SIZE: 'bundle-size',\n  COMPILE_SPEED: 'compile-speed',\n};\n\nexport const CASES = [\n  'mwa-minimal',\n  'mwa-initial',\n  'mwa-ssr',\n  'mwa-arco-pro',\n  'mwa-arco-pro-esbuild',\n];\n\nexport const BUNDLE_SIZE_DEFAULT_CASE = ['mwa-minimal', 'mwa-initial']; \nexport const COMPILE_SPEED_DEFAULT_CASE = ['mwa-arco-pro', 'mwa-arco-pro-esbuild'];\n\nexport const BUNDLE_SIZE_METRICS = ['minifiedBundleSize', 'gzippedBundleSize'];\n\nexport const COMPILE_SPEED_METRICS = [\n  'buildColdBootTime',\n  'buildHotBootTime',\n  'buildPluginSetupTime',\n  'buildPrepareTime',\n  'devColdBootTime',\n  'devHotBootTime',\n  'devPluginSetupTime',\n  'devPrepareTime',\n];\n\nexport const COMMITS_INFO_URL = './commits-info.json';\n","import { Menu, MenuProps } from '@arco-design/web-react';\nimport styled from '@modern-js/runtime/styled';\nimport { IconInteraction, IconThunderbolt } from '@arco-design/web-react/icon';\nimport { MENU } from '@/shared/constant';\n\nconst MenuItem = Menu.Item;\n\nconst Root = styled.div`\n  position: fixed;\n  top: 56px;\n  left: 0;\n  bottom: 0;\n  width: 260px;\n`;\n\nconst itemStyle = {\n  display: 'flex',\n  alignItems: 'center',\n  height: 48,\n  fontSize: 15,\n  marginBottom: 8,\n};\n\nexport const SideMenu = (props: {\n  onClickMenuItem: MenuProps['onClickMenuItem'];\n  defaultSelectedKey: string;\n}) => (\n  <Root>\n    <Menu\n      mode=\"vertical\"\n      style={{\n        height: '100%',\n        padding: '16px 4px',\n      }}\n      onClickMenuItem={props.onClickMenuItem}\n      defaultSelectedKeys={[props.defaultSelectedKey]}\n    >\n      <MenuItem key={MENU.BUNDLE_SIZE} style={itemStyle}>\n        <IconInteraction style={{ fontSize: 20 }} />\n        Bundle Size\n      </MenuItem>\n      <MenuItem key={MENU.COMPILE_SPEED} style={itemStyle}>\n        <IconThunderbolt style={{ fontSize: 20 }} />\n        Compile Speed\n      </MenuItem>\n    </Menu>\n  </Root>\n);\n","import { CASES } from '@/shared/constant';\nimport {\n  Card,\n  Grid,\n  Form,\n  Button,\n  Select,\n  FormProps,\n  Typography,\n} from '@arco-design/web-react';\n\nconst SelectGroup = ({\n  index,\n  metrics,\n  initialCase,\n}: {\n  index: number;\n  metrics: string[];\n  initialCase: string[];\n}) => {\n  return (\n    <>\n      <Typography.Title heading={6} style={{ marginTop: index > 1 ? 12 : 0 }}>\n        Group{index}:\n      </Typography.Title>\n      <Grid.Row gutter={40}>\n        <Grid.Col span={8}>\n          <Form.Item\n            label=\"Case\"\n            field={`caseName${index}`}\n            initialValue={initialCase[index - 1]}\n            style={{ marginBottom: 8 }}\n          >\n            <Select>\n              {CASES.map(caseName => (\n                <Select.Option key={caseName} value={caseName}>\n                  {caseName}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n        </Grid.Col>\n        <Grid.Col span={8}>\n          <Form.Item\n            label=\"Metrics\"\n            field={`metricsName${index}`}\n            initialValue={metrics[0]}\n            style={{ marginBottom: 8 }}\n          >\n            <Select>\n              {metrics.map(name => (\n                <Select.Option key={name} value={name}>\n                  {name}\n                </Select.Option>\n              ))}\n            </Select>\n          </Form.Item>\n        </Grid.Col>\n      </Grid.Row>\n    </>\n  );\n};\n\nexport const Filters = (props: {\n  metrics: string[];\n  onSubmit: FormProps['onSubmit'];\n  initialCase: string[];\n}) => {\n  return (\n    <Card bordered={false} style={{ marginBottom: 24 }}>\n      <Form layout=\"horizontal\" labelAlign=\"left\" onSubmit={props.onSubmit}>\n        <SelectGroup {...props} index={1} />\n        <SelectGroup {...props} index={2} />\n        <Button\n          type=\"primary\"\n          htmlType=\"submit\"\n          style={{ width: 120, marginTop: 12 }}\n        >\n          Query\n        </Button>\n      </Form>\n    </Card>\n  );\n};\n","import { COMMITS_INFO_URL } from './constant';\nimport type { Metrics } from '../../../scripts/src/shared/types';\n\nexport type CommitInfo = {\n  id: string;\n  time: number;\n};\n\nexport type FetchedMetrics = CommitInfo & {\n  metrics: Record<string, any>;\n};\n\nconst cache = new Map();\n\nconst fetchJsonWithCache = async (url: string) => {\n  if (cache.has(url)) {\n    return cache.get(url);\n  }\n  const data = await fetch(url)\n    .then(res => res.json())\n    .catch(() => {});\n  cache.set(url, data);\n  return data;\n};\n\nexport const fetchCommitsInfo = async () =>\n  fetchJsonWithCache(COMMITS_INFO_URL);\n\nexport const fetchMetrics = async (\n  caseName: string,\n): Promise<FetchedMetrics[]> => {\n  const commitsInfo: CommitInfo[] = await fetchCommitsInfo();\n\n  const allMetrics: Metrics[] = await Promise.all(\n    commitsInfo.map(info =>\n      fetchJsonWithCache(`./${info.id}/${caseName}.json`),\n    ),\n  );\n\n  return allMetrics\n    .map((metrics, index) => ({\n      ...commitsInfo[index],\n      metrics,\n    }))\n    .filter(item => !!item.metrics);\n};\n","import dayjs from 'dayjs';\nimport { FetchedMetrics } from './request';\n\nexport const formatDate = (time: number) =>\n  dayjs(time).format('YY-MM-DD HH:mm');\n\nexport const formatFileSize = (size: number) =>\n  Number((size / 1000).toFixed(2));\n\nexport const formatSecond = (ms: number) => Number((ms / 1000).toFixed(2));\n\nexport const mergeData = (\n  data1: FetchedMetrics[],\n  data2: FetchedMetrics[],\n  caseNames: string[],\n  metricsNames: string[],\n) =>\n  [\n    ...data1.map(item => ({\n      ...item,\n      caseName: caseNames[0],\n      metricsName: metricsNames[0],\n    })),\n    ...data2.map(item => ({\n      ...item,\n      caseName: caseNames[1],\n      metricsName: metricsNames[1],\n    })),\n  ].sort((a, b) => a.time - b.time);\n","import { Line } from '@antv/g2plot';\nimport { Card, Typography } from '@arco-design/web-react';\nimport {\n  BUNDLE_SIZE_METRICS,\n  BUNDLE_SIZE_DEFAULT_CASE,\n} from '@/shared/constant';\nimport { Filters } from './Filters';\nimport { useEffect, useRef, useState } from 'react';\nimport { FetchedMetrics, fetchMetrics } from '@/shared/request';\nimport { formatDate, formatFileSize, mergeData } from '@/shared/utils';\n\nconst formatData = (\n  data1: FetchedMetrics[],\n  data2: FetchedMetrics[],\n  caseNames: string[],\n  metricsNames: string[],\n) =>\n  mergeData(data1, data2, caseNames, metricsNames).map(item => ({\n    category: caseNames[0] === caseNames[1] ? item.metricsName : item.caseName,\n    date: `${formatDate(item.time)}（${item.id}）`,\n    size: formatFileSize(item.metrics[item.metricsName].total),\n  }));\n\nexport const ContentBundleSize = () => {\n  const chartRoot = useRef<HTMLDivElement | null>(null);\n  const chartInstance = useRef<Line | null>(null);\n  const [caseNames, setCaseNames] = useState(BUNDLE_SIZE_DEFAULT_CASE);\n  const [metricsNames, setMetricsNames] = useState([\n    BUNDLE_SIZE_METRICS[0],\n    BUNDLE_SIZE_METRICS[0],\n  ]);\n\n  const renderLineChart = ({\n    root,\n    data1,\n    data2,\n    caseNames,\n    metricsNames,\n  }: {\n    root: HTMLElement | null;\n    data1: FetchedMetrics[];\n    data2: FetchedMetrics[];\n    caseNames: string[];\n    metricsNames: string[];\n  }) => {\n    const data = formatData(data1, data2, caseNames, metricsNames);\n    if (chartInstance.current) {\n      chartInstance.current.changeData(data);\n    } else if (root) {\n      chartInstance.current = new Line(root, {\n        data,\n        height: 400,\n        xField: 'date',\n        yField: 'size',\n        seriesField: 'category',\n        xAxis: {\n          label: {\n            formatter: text => text.split(' ')[0],\n          },\n        },\n        yAxis: {\n          label: {\n            formatter: text => `${text} KB`,\n          },\n        },\n        point: {\n          size: 3,\n        },\n        tooltip: {\n          fields: ['date', 'size', 'category'],\n          formatter: datum => ({\n            name: datum.category,\n            value: `${datum.size} KB`,\n          }),\n        },\n      });\n\n      chartInstance.current.render();\n    }\n  };\n\n  const onSubmitForm = (params: {\n    caseName1: string;\n    caseName2: string;\n    metricsName1: string;\n    metricsName2: string;\n  }) => {\n    setCaseNames([params.caseName1, params.caseName2]);\n    setMetricsNames([params.metricsName1, params.metricsName2]);\n  };\n\n  useEffect(() => {\n    Promise.all([fetchMetrics(caseNames[0]), fetchMetrics(caseNames[1])]).then(\n      ([data1, data2]) => {\n        renderLineChart({\n          data1,\n          data2,\n          caseNames,\n          metricsNames,\n          root: chartRoot.current,\n        });\n      },\n    );\n  }, [caseNames, metricsNames]);\n\n  return (\n    <div style={{ padding: 24 }}>\n      <Filters\n        metrics={BUNDLE_SIZE_METRICS}\n        initialCase={caseNames}\n        onSubmit={onSubmitForm}\n      />\n      <Card bordered={false} style={{ height: 464 }}>\n        <Typography.Title heading={6} style={{ marginTop: 0 }}>\n          Trending\n        </Typography.Title>\n        <div ref={chartRoot} />\n      </Card>\n    </div>\n  );\n};\n","import { Line } from '@antv/g2plot';\nimport { Card, Typography } from '@arco-design/web-react';\nimport {\n  COMPILE_SPEED_METRICS,\n  COMPILE_SPEED_DEFAULT_CASE,\n} from '@/shared/constant';\nimport { Filters } from './Filters';\nimport { useEffect, useRef, useState } from 'react';\nimport { FetchedMetrics, fetchMetrics } from '@/shared/request';\nimport { formatDate, formatSecond, mergeData } from '@/shared/utils';\n\nconst formatData = (\n  data1: FetchedMetrics[],\n  data2: FetchedMetrics[],\n  caseNames: string[],\n  metricsNames: string[],\n) =>\n  mergeData(data1, data2, caseNames, metricsNames).map(item => ({\n    category: caseNames[0] === caseNames[1] ? item.metricsName : item.caseName,\n    date: `${formatDate(item.time)}（${item.id}）`,\n    time: formatSecond(item.metrics[item.metricsName]),\n  }));\n\nexport const ContentCompileSpeed = () => {\n  const chartRoot = useRef<HTMLDivElement | null>(null);\n  const chartInstance = useRef<Line | null>(null);\n  const [caseNames, setCaseNames] = useState(COMPILE_SPEED_DEFAULT_CASE);\n  const [metricsNames, setMetricsNames] = useState([\n    COMPILE_SPEED_METRICS[0],\n    COMPILE_SPEED_METRICS[0],\n  ]);\n\n  const renderLineChart = ({\n    root,\n    data1,\n    data2,\n    caseNames,\n    metricsNames,\n  }: {\n    root: HTMLElement | null;\n    data1: FetchedMetrics[];\n    data2: FetchedMetrics[];\n    caseNames: string[];\n    metricsNames: string[];\n  }) => {\n    const data = formatData(data1, data2, caseNames, metricsNames);\n    if (chartInstance.current) {\n      chartInstance.current.changeData(data);\n    } else if (root) {\n      chartInstance.current = new Line(root, {\n        data,\n        height: 400,\n        xField: 'date',\n        yField: 'time',\n        seriesField: 'category',\n        xAxis: {\n          label: {\n            formatter: text => text.split(' ')[0],\n          },\n        },\n        yAxis: {\n          label: {\n            formatter: text => `${text} s`,\n          },\n        },\n        point: {\n          size: 3,\n        },\n        tooltip: {\n          fields: ['date', 'time', 'category'],\n          formatter: datum => ({\n            name: datum.category,\n            value: datum.time + 's',\n          }),\n        },\n      });\n\n      chartInstance.current.render();\n    }\n  };\n\n  const onSubmitForm = (params: {\n    caseName1: string;\n    caseName2: string;\n    metricsName1: string;\n    metricsName2: string;\n  }) => {\n    setCaseNames([params.caseName1, params.caseName2]);\n    setMetricsNames([params.metricsName1, params.metricsName2]);\n  };\n\n  useEffect(() => {\n    Promise.all([fetchMetrics(caseNames[0]), fetchMetrics(caseNames[1])]).then(\n      ([data1, data2]) => {\n        renderLineChart({\n          data1,\n          data2,\n          caseNames,\n          metricsNames,\n          root: chartRoot.current,\n        });\n      },\n    );\n  }, [caseNames, metricsNames]);\n\n  return (\n    <div style={{ padding: 24 }}>\n      <Filters\n        metrics={COMPILE_SPEED_METRICS}\n        initialCase={caseNames}\n        onSubmit={onSubmitForm}\n      />\n      <Card bordered={false} style={{ height: 464 }}>\n        <Typography.Title heading={6} style={{ marginTop: 0 }}>\n          Trending\n        </Typography.Title>\n        <div ref={chartRoot} />\n      </Card>\n    </div>\n  );\n};\n","import { MENU } from '@/shared/constant';\nimport { ContentBundleSize } from './ContentBundleSize';\nimport { ContentCompileSpeed } from './ContentCompileSpeed';\n\nexport const Content = (props: { menuIndex: string }) => {\n  const renderSubContent = () => {\n    switch (props.menuIndex) {\n      case MENU.BUNDLE_SIZE:\n        return <ContentBundleSize />;\n      case MENU.COMPILE_SPEED:\n        return <ContentCompileSpeed />;\n    }\n    return null;\n  };\n\n  return (\n    <div style={{ marginLeft: 260, marginTop: 56 }}>{renderSubContent()}</div>\n  );\n};\n","import '@arco-design/web-react/dist/css/arco.css';\nimport './App.scss';\nimport styled from '@modern-js/runtime/styled';\nimport { NavBar } from './components/NavBar';\nimport { SideMenu } from './components/SideMenu';\nimport { Content } from './components/Content';\nimport { useState } from 'react';\nimport { MENU } from './shared/constant';\n\nconst Container = styled.div`\n  min-height: 100vh;\n`;\n\nconst App = () => {\n  const [menuIndex, setMenuIndex] = useState(MENU.BUNDLE_SIZE);\n\n  return (\n    <Container>\n      <NavBar />\n      <SideMenu defaultSelectedKey={menuIndex} onClickMenuItem={setMenuIndex} />\n      <Content menuIndex={menuIndex} />\n    </Container>\n  );\n};\n\nexport default App;\n"],"names":["Root","styled","Left","Image","ImageWrapper","Link","GitHubIcon","target","href","IconGithub","NavBar","className","src","MENU","CASES","BUNDLE_SIZE_DEFAULT_CASE","COMPILE_SPEED_DEFAULT_CASE","BUNDLE_SIZE_METRICS","COMPILE_SPEED_METRICS","MenuItem","Menu","itemStyle","display","alignItems","height","fontSize","marginBottom","SideMenu","props","mode","style","padding","onClickMenuItem","defaultSelectedKeys","defaultSelectedKey","IconInteraction","IconThunderbolt","SelectGroup","index","metrics","initialCase","Typography","heading","marginTop","Grid","gutter","span","Form","label","field","initialValue","Select","map","caseName","value","name","Filters","Card","bordered","layout","labelAlign","onSubmit","Button","type","htmlType","width","cache","Map","fetchJsonWithCache","url","has","get","fetch","then","res","json","data","set","fetchCommitsInfo","fetchMetrics","commitsInfo","Promise","all","info","id","allMetrics","filter","item","formatDate","time","dayjs","format","mergeData","data1","data2","caseNames","metricsNames","metricsName","sort","a","b","ContentBundleSize","chartRoot","useRef","chartInstance","useState","setCaseNames","setMetricsNames","renderLineChart","root","category","date","size","total","Number","toFixed","formatData","current","changeData","Line","xField","yField","seriesField","xAxis","formatter","text","split","yAxis","point","tooltip","fields","datum","render","useEffect","params","caseName1","caseName2","metricsName1","metricsName2","ref","ContentCompileSpeed","ms","Content","marginLeft","menuIndex","renderSubContent","Container","setMenuIndex"],"sourceRoot":""}